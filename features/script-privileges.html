<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.23" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <meta property="og:type" content="article" /><meta property="og:image" content="https://jaylydev.github.io/icon.png" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q3X0X9VRB2"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q3X0X9VRB2');</script><title>Script Privileges | JaylyMC</title><meta name="description" content="A guide on Scripting API privileges (read-only mode and early-execution mode)" />
    <link rel="preload" href="/scriptapi-docs/assets/style-BFcqZo_Z.css" as="style" /><link rel="stylesheet" href="/scriptapi-docs/assets/style-BFcqZo_Z.css" />
    <link rel="modulepreload" href="/scriptapi-docs/assets/app-ChVSvtdD.js" /><link rel="modulepreload" href="/scriptapi-docs/assets/script-privileges.html-C4dQ02sq.js" />
    <link rel="prefetch" href="/scriptapi-docs/assets/index.html-yVuUYlXX.js" as="script" /><link rel="prefetch" href="/scriptapi-docs/assets/custom-components.html-DzqQIUNO.js" as="script" /><link rel="prefetch" href="/scriptapi-docs/assets/dynamic-properties.html-CAsqP8VK.js" as="script" /><link rel="prefetch" href="/scriptapi-docs/assets/index.html-CU30dVa4.js" as="script" /><link rel="prefetch" href="/scriptapi-docs/assets/script-eval.html-D-ymDRFm.js" as="script" /><link rel="prefetch" href="/scriptapi-docs/assets/secrets-and-variables.html-CoH2bWzV.js" as="script" /><link rel="prefetch" href="/scriptapi-docs/assets/cdn-links.html-DqLL1lCz.js" as="script" /><link rel="prefetch" href="/scriptapi-docs/assets/index.html-Dj7gupLu.js" as="script" /><link rel="prefetch" href="/scriptapi-docs/assets/scripting-v1-docs.html-BuAxAym5.js" as="script" /><link rel="prefetch" href="/scriptapi-docs/assets/404.html-qVVL4bEg.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/scriptapi-docs/"><!----><span class="vp-site-name vp-hide-mobile" aria-hidden="true">JaylyMC</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://jaylydev.github.io" aria-label="Homepage" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Homepage<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://discord.gg/8xzSHD84xv" aria-label="Discord" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Discord<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/jaylydev/scriptapi-docs" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://jaylydev.github.io" aria-label="Homepage" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Homepage<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://discord.gg/8xzSHD84xv" aria-label="Discord" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Discord<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/jaylydev/scriptapi-docs" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Features <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/scriptapi-docs/features/custom-components.html" aria-label="Custom Components"><!--[--><!--[--><!--]--><!--]-->Custom Components<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/scriptapi-docs/features/dynamic-properties.html" aria-label="Dynamic Properties"><!--[--><!--[--><!--]--><!--]-->Dynamic Properties<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/scriptapi-docs/features/script-eval.html" aria-label="Script Eval"><!--[--><!--[--><!--]--><!--]-->Script Eval<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/scriptapi-docs/features/script-privileges.html" aria-label="Script Privileges"><!--[--><!--[--><!--]--><!--]-->Script Privileges<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/scriptapi-docs/features/secrets-and-variables.html" aria-label="Secrets and Variables"><!--[--><!--[--><!--]--><!--]-->Secrets and Variables<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Meta <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/scriptapi-docs/meta/cdn-links.html" aria-label="CDN Links"><!--[--><!--[--><!--]--><!--]-->CDN Links<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/scriptapi-docs/meta/scripting-v1-docs.html" aria-label="Scripting V1 Docs"><!--[--><!--[--><!--]--><!--]-->Scripting V1 Docs<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">References <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="auto-link external-link vp-sidebar-item" href="/scriptapi-docs/latest/" aria-label="Latest Docs" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Latest Docs<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="auto-link external-link vp-sidebar-item" href="/scriptapi-docs/preview/" aria-label="Preview Docs" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Preview Docs<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="script-privileges" tabindex="-1"><a class="header-anchor" href="#script-privileges"><span>Script Privileges</span></a></h1><p>This is a guide on understanding what Scripting API privileges are. This includes going through what read-only mode, and the new early-execution mode implemented in Scripting v2.0.0 are about.</p><p>You might have encounted this error when running your scripts, about not having required privileges when calling a native function or a property such as the following mesasge:</p><blockquote><p>Plugin [&lt;plugin name&gt; - &lt;target module version&gt;] - [&lt;file&gt;] ran with error: [ReferenceError: Native function [&lt;Class&gt;::&lt;method&gt;] does not have required privileges. at ...]</p></blockquote><p>There are two reasons this message occurs, one is that the method or property is called during read-only mode, or early-execution mode.</p><h2 id="read-only-mode" tabindex="-1"><a class="header-anchor" href="#read-only-mode"><span>Read-only mode</span></a></h2><p>This means script that are in this state are not allowed to alter world state within these callbacks. The script is in read-only state when Minecraft simulation begins and before events are triggered, or before the start of the &quot;script&quot; tick.</p><p>When the error above occurs, that means you attempted to run a function that tries to modify the state of the world on before events.</p><h3 id="resolving-read-only-issue" tabindex="-1"><a class="header-anchor" href="#resolving-read-only-issue"><span>Resolving read-only issue</span></a></h3><p>The easiest way to resolve this issue is to move code, which contains all native functions that can&#39;t be called in read-only mode, and all native properties that can&#39;t be edited in read-only mode into a <code>system.run</code> callback. Here is an example scnerario where we&#39;re trying to modify the state of the world in a before event callback.</p><p>The native function <code>MessageFormData.show()</code> cannot be called in read-only mode, so the following code will throw a ReferenceError explaining that function does not have required privileges.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> system<span class="token punctuation">,</span> world <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@minecraft/server&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageFormData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@minecraft/server-ui&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Subscribe to playerInteractWithBlock event to detect</span></span>
<span class="line"><span class="token comment">// if a player interacts with a block</span></span>
<span class="line">world<span class="token punctuation">.</span>beforeEvents<span class="token punctuation">.</span>playerInteractWithBlock<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Check if player interacts with a crafter whilst holding diamonds</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span></span>
<span class="line">    event<span class="token punctuation">.</span>block<span class="token punctuation">.</span>typeId <span class="token operator">===</span> <span class="token string">&quot;minecraft:crafter&quot;</span> <span class="token operator">&amp;&amp;</span></span>
<span class="line">    event<span class="token punctuation">.</span>itemStack <span class="token operator">&amp;&amp;</span></span>
<span class="line">    event<span class="token punctuation">.</span>itemStack<span class="token punctuation">.</span>typeId <span class="token operator">===</span> <span class="token string">&quot;minecraft:diamond&quot;</span></span>
<span class="line">  <span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Cancel interaction</span></span>
<span class="line">    event<span class="token punctuation">.</span>cancel <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageFormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">&quot;Crafter&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">&quot;This is a crafter!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">button1</span><span class="token punctuation">(</span><span class="token string">&quot;Close&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Error throws as .show() requires privileges.</span></span>
<span class="line">    form<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// player.sendMessage is not limited by read-only mode,</span></span>
<span class="line">    <span class="token comment">// so this function can be called here.</span></span>
<span class="line">    player<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Player is using the crafter.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To adapt the code so it runs properly in read-only mode, the code above is changed into this:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> system<span class="token punctuation">,</span> world <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@minecraft/server&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageFormData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@minecraft/server-ui&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Subscribe to playerInteractWithBlock event to detect</span></span>
<span class="line"><span class="token comment">// if a player interacts with a block</span></span>
<span class="line">world<span class="token punctuation">.</span>beforeEvents<span class="token punctuation">.</span>playerInteractWithBlock<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Check if player interacts with a crafter whilst holding diamonds</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span></span>
<span class="line">    event<span class="token punctuation">.</span>block<span class="token punctuation">.</span>typeId <span class="token operator">===</span> <span class="token string">&quot;minecraft:crafter&quot;</span> <span class="token operator">&amp;&amp;</span></span>
<span class="line">    event<span class="token punctuation">.</span>itemStack <span class="token operator">&amp;&amp;</span></span>
<span class="line">    event<span class="token punctuation">.</span>itemStack<span class="token punctuation">.</span>typeId <span class="token operator">===</span> <span class="token string">&quot;minecraft:diamond&quot;</span></span>
<span class="line">  <span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Cancel interaction</span></span>
<span class="line">    event<span class="token punctuation">.</span>cancel <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Creating a new MessageFormData object, calling title,</span></span>
<span class="line">    <span class="token comment">// body, and button1 can be called within read-only mode.</span></span>
<span class="line">    <span class="token comment">// This means they can be called within this</span></span>
<span class="line">    <span class="token comment">// callback before script tick.</span></span>
<span class="line">    <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageFormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">&quot;Crafter&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">&quot;This is a crafter!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">button1</span><span class="token punctuation">(</span><span class="token string">&quot;Close&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// If event.player is used during script tick, declare</span></span>
<span class="line">    <span class="token comment">// it in a variable, otherwise you can&#39;t retrieve the</span></span>
<span class="line">    <span class="token comment">// player object, as event object turns into null</span></span>
<span class="line">    <span class="token comment">// after read-only state ends.</span></span>
<span class="line">    <span class="token keyword">const</span> player <span class="token operator">=</span> event<span class="token punctuation">.</span>player<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Use system.run to queue for later in the current</span></span>
<span class="line">    <span class="token comment">// tick to bypass read-only state</span></span>
<span class="line">    system<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// Show the player a message form in script tick.</span></span>
<span class="line">      <span class="token comment">// As MessageFormData.show() is marked so it can&#39;t</span></span>
<span class="line">      <span class="token comment">// be called in read-only mode</span></span>
<span class="line">      form<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// player.sendMessage is not limited by read-only mode,</span></span>
<span class="line">    <span class="token comment">// so this function can be called here.</span></span>
<span class="line">    player<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Player is using the crafter.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Difference</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff"><pre><code><span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    form.show(event.player);</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    // If event.player is used during script tick, declare</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">    // it in a variable, otherwise you can&#39;t retrieve the</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">    // player object, as event object turns into null</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">    // after read-only state ends.</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">    const player = event.player;</span>
<span class="line"></span></span></span>
<span class="line"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    // Use system.run to queue for later in the current</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">    // tick to bypass read-only state</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">    system.run(() =&gt; {</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">      // Show the player a message form in script tick.</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">      // As MessageFormData.show() is marked so it can&#39;t</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">      // be called in read-only mode</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">      form.show(player);</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">    });</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 23;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Highly recommend to check the API reference to see if the method or property can be called in read-only state. Each property or method that can&#39;t be called in read-only mode is mentioned in the description with the following text:</p><blockquote><ul><li>This function <strong>can&#39;t be called</strong> in read-only mode.</li><li>This property <strong>can&#39;t be edited</strong> in read-only mode.</li></ul></blockquote><h2 id="early-execution-mode" tabindex="-1"><a class="header-anchor" href="#early-execution-mode"><span>Early-execution mode</span></a></h2><p>This means the script is an environment before the world is loaded, which means most APIs like general world gamemode get property queries, are not ready to be accessed and worked with.</p><p>When the privilege error occurs, that means you attempted to run a function or edit a property that requires the world is loaded, before the world is loaded.</p><h3 id="resolving-early-execution-issue" tabindex="-1"><a class="header-anchor" href="#resolving-early-execution-issue"><span>Resolving early-execution issue</span></a></h3><p>If you have code using an API that is being run in the root context of a script file, it will need to be deferred to run either during or after the <code>world.afterEvents.worldLoad</code> event, or the traditional <code>system.run</code> timed callback.</p><p>You also need to move code that uses event the APIs below, if they were run in the root context of a script file previously, to root context instead of the <code>world.afterEvents.worldLoad</code> event, to avoid some events not being triggered, leading to script malfunction.</p><p>The following is an example of sending a message when script loads. Before v2.0.0 breaking changes, the script used to look like this:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> world <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@minecraft/server&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// This procedure is placed in root context of a script file.</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> player <span class="token keyword">of</span> world<span class="token punctuation">.</span><span class="token function">getAllPlayers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  player<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>player<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">world<span class="token punctuation">.</span>afterEvents<span class="token punctuation">.</span>playerSpawn<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> player<span class="token punctuation">,</span> initialSpawn <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>initialSpawn<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">  player<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>player<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To adapt to scripting v2.0.0 changes, the code above is changed into this:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> world <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@minecraft/server&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Keep the event subscription function that was in root</span></span>
<span class="line"><span class="token comment">// context of a script file previously there.</span></span>
<span class="line">world<span class="token punctuation">.</span>afterEvents<span class="token punctuation">.</span>playerSpawn<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> player<span class="token punctuation">,</span> initialSpawn <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>initialSpawn<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">  player<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>player<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">world<span class="token punctuation">.</span>afterEvents<span class="token punctuation">.</span>worldLoad<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// This procedure is moved inside the worldLoad callback,</span></span>
<span class="line">  <span class="token comment">// since world.getAllPlayers() can&#39;t be called in</span></span>
<span class="line">  <span class="token comment">// early-execution mode.</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> player <span class="token keyword">of</span> world<span class="token punctuation">.</span><span class="token function">getAllPlayers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    player<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>player<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Difference</p><div class="language-diff line-numbers-mode" data-highlighter="prismjs" data-ext="diff"><pre><code><span class="line"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> for (const player of world.getAllPlayers()) {</span>
<span class="line"></span><span class="token prefix deleted">-</span><span class="token line">   player.sendMessage(`Hello ${player.name}!`);</span>
<span class="line"></span><span class="token prefix deleted">-</span><span class="token line"> }</span>
<span class="line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> world.afterEvents.worldLoad.subscribe(() =&gt; {</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">   // This procedure is moved inside the worldLoad callback,</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">   // since world.getAllPlayers() can&#39;t be called in</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">   // early-execution mode.</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">   for (const player of world.getAllPlayers()) {</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">     player.sendMessage(`Hello ${player.name}!`);</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line">   }</span>
<span class="line"></span><span class="token prefix inserted">+</span><span class="token line"> });</span>
<span class="line"></span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 23;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="what-apis-are-available-in-early-execution" tabindex="-1"><a class="header-anchor" href="#what-apis-are-available-in-early-execution"><span>What APIs are available in early execution?</span></a></h4><p>The following are the initial APIs available in early execution mode for scripting v2.0.0-beta:</p><ul><li><code>world.beforeEvents.*.subscribe</code></li><li><code>world.beforeEvents.*.unsubscribe</code></li><li><code>world.afterEvents.*.subscribe</code></li><li><code>world.afterEvents.*.unsubscribe</code></li><li><code>system.afterEvents.*.subscribe</code></li><li><code>system.afterEvents.*.unsubscribe</code></li><li><code>system.beforeEvents.*.subscribe</code></li><li><code>system.beforeEvents.*.unsubscribe</code></li><li><code>system.clearJob</code></li><li><code>system.clearRun</code></li><li><code>system.run</code></li><li><code>system.runInterval</code></li><li><code>system.runJob</code></li><li><code>system.runTimeout</code></li><li><code>system.waitTicks</code></li><li><code>BlockComponentRegistry.registerCustomComponent</code></li><li><code>ItemComponentRegistry.registerCustomComponent</code></li></ul><p>Again, please check the API reference to see if the method or property can be called in early-execution state. Each property or method that can be called in early-execution mode is mentioned in the description with one of the following text:</p><blockquote><ul><li>This property <strong>can be read</strong> in early-execution mode.</li><li>This function <strong>can be called</strong> in early-execution mode.</li></ul></blockquote></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><time class="meta-item-info" datetime="2025-05-30T11:27:35.000Z" data-allow-mismatch>5/30/25, 11:27 AM</time></div><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/scriptapi-docs/features/script-eval.html" aria-label="Script Eval"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">Script Eval</span></div><!--]--></a><a class="route-link auto-link next" href="/scriptapi-docs/features/secrets-and-variables.html" aria-label="Secrets and Variables"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">Secrets and Variables</span></div><!--]--></a></nav><!--[--><!--[--><div class="site-footer"><a href="https://jaylydev.github.io/privacy-policy/">Privacy Policy</a> | © JaylyMC 2025 </div><!--]--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/scriptapi-docs/assets/app-ChVSvtdD.js" defer></script>
  </body>
</html>
